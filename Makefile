# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: rmartins <rmartins@student.42.fr>          +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2021/05/13 16:35:42 by rmartins          #+#    #+#              #
#    Updated: 2021/06/04 17:49:56 by rmartins         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

NAME = push_swap

LIBFT = libft/libft.a
CFLAGS = -Wall -Wextra -Werror -g
AR = ar rcsv
OBJ_DIR = obj
SRC_DIR = src
OBJ = $(SRC:%.c=$(OBJ_DIR)/%.o)

HEADER = ft_ansi.h \
		push_swap.h

SRC = main.c \
	array_utils.c \
	validate_args.c \
	arg_errors.c \
	sort_instructions.c \
	exec_instructions.c \
	check_sorted.c \
	sort_small.c \
	sort_small_utils.c \
	sort_big.c
# print_stack.c
# sort_algorithm.c


all: $(NAME)

$(NAME): $(OBJ)
	@echo $(ANSI_B_BGREEN) "compile libft" $(ANSI_RESET)$(ANSI_F_BBLACK)
	$(MAKE) all -C libft
	@echo $(ANSI_RESET) ""
	@echo $(ANSI_B_BGREEN) "compile executable" $(ANSI_RESET)$(ANSI_F_BBLACK)
	gcc $(CFLAGS) $(OBJ) $(LIBFT) -o $(NAME)
	@echo $(ANSI_RESET) ""

$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c $(addprefix inc/,$(HEADER))
	@echo $(ANSI_B_BGREEN) "compile push_swap objects" $(ANSI_RESET)$(ANSI_F_BBLACK)
	mkdir -p $(dir $@)
	gcc $(CFLAGS) -Iinc -c $< -o $@
	@echo $(ANSI_RESET)

clean:
	@echo $(ANSI_B_RED) "clean" $(ANSI_RESET)$(ANSI_F_BRED)
	$(MAKE) clean -C libft
	rm -rf $(OBJ_DIR)
	@echo $(ANSI_RESET) ""

fclean: clean
	@echo $(ANSI_B_RED) "fclean" $(ANSI_RESET)$(ANSI_F_BRED)
	$(MAKE) fclean -C libft
	rm -f cub3DS
	rm -f $(NAME)
	@echo $(ANSI_RESET) ""

re: fclean all

bonus: all
	
.PHONY: all clean fclean

# colors
ANSI_RESET = "\033[0m"
ANSI_B_RED = "\033[41m"
ANSI_B_BGREEN = "\033[42;1m"
ANSI_F_BRED = "\033[31;1m"
ANSI_F_BBLACK = "\033[30;1m"


lib:
	$(MAKE) -C libft

norm:
	@echo $(ANSI_B_RED) "norminette v3" $(ANSI_RESET)
	$(MAKE) norm -C libft
	@norminette $(addprefix inc/,$(HEADER)) $(addprefix src/,$(SRC))

libnorm:
	@echo $(ANSI_B_RED) "libft norminette" $(ANSI_RESET)
	$(MAKE) norm -C libft

run: all
	@echo $(ANSI_B_RED) "Running for debbuger without sanitize" $(ANSI_RESET)
	./$(NAME) $(LIST_INTEGER)
	@./$(NAME) $(LIST_INTEGER) | wc -l
	@./$(NAME) $(LIST_INTEGER) | ./checker_linux $(LIST_INTEGER)

runv: all
	@echo $(ANSI_B_RED) "Valgrind RESULT" $(ANSI_RESET)
	#valgrind -q --leak-check=full --track-origins=yes --show-leak-kinds=all ./$(NAME) $(LIST_INTEGER)
	valgrind --leak-check=full --show-leak-kinds=all -s ./$(NAME) $(LIST_INTEGER)

runs: all
	@echo $(ANSI_B_RED) "Running with sanitize" $(ANSI_RESET)
	gcc $(CFLAGS) -fsanitize=address $(OBJ) $(LIBFT) -o push_swaps
	./push_swaps $(LIST_INTEGER)

# LIST_INTEGER = 2 6 20 -2 7 1 5 15 25
LIST_INTEGER = 4 2 3 1 5
LIST_INTEGER = 5 2 1 3 4
LIST_INTEGER = 5 3 1 4 2
LIST_INTEGER = 3 4 10 7 2 8 9 1 6 5
LIST_INTEGER = 8 2 6 9 5 10 1 7 3 4
LIST_INTEGER = 5 6 9 1 3 8 4 10 7 2
# LIST_INTEGER = 15 4 10 29 25 13 1 22 30 21 11 26 2 16 19 12 7 6 3 8 23 20 17 27 28 18 24 5 9 14
# LIST_INTEGER = 595 776 98 57 430 796 568 635 903 262 196 231 37 977 546 658 581 728 907 43 931 283 621 541 247 392 161 984 991 482 930 710 825 600 641 8 702 997 896 87 1 295 540 847 682 40 272 918 686 590 339 742 341 992 486 29 159 333 274 812 717 798 533 190 163 10 599 497 734 27 137 554 279 277 775 483 859 452 695 820 401 19 244 327 662 459 203 518 738 153 171 545 53 911 422 919 44 805 902 224 47 441 700 116 722 30 250 500 12 763 801 946 517 759 184 780 217 575 904 784 385 604 603 750 102 781 737 241 228 597 183 197 785 556 357 957 627 120 531 741 623 164 649 127 634 951 523 707 211 843 570 607 472 914 440 195 519 6 108 845 477 924 56 99 605 76 118 724 167 366 222 747 511 584 501 512 752 754 424 829 841 17 181 834 647 376 229 892 280 101 331 529 900 322 866 583 258 655 114 851 669 106 444 49 890 872 148 731 958 202 968 316 961 314 169 515 187 938 661 388 302 562 559 983 594 370 870 427 475 209 198 524 906 485 917 436 880 629 71 72 815 415 470 601 777 899 253 736 268 343 301 73 199 119 474 69 225 257 400 981 59 897 97 821 838 598 952 26 749 901 608 113 109 355 739 454 65 179 391 596 753 551 126 81 644 216 567 256 351 466 929 285 824 683 973 292 480 318 922 462 449 90 916 373 746 791 296 625 150 35 633 853 286 578 117 389 7 709 534 689 352 383 11 886 756 349 947 124 189 936 587 953 782 469 402 967 646 885 319 894 294 33 826 680 32 565 537 718 848 146 990 912 804 141 764 100 614 591 840 730 694 527 721 864 945 210 881 447 797 672 513 143 803 429 706 616 421 495 932 659 795 2 624 382 4 334 481 393 394 535 888 586 705 622 28 539 978 329 323 266 995 239 498 758 145 234 643 772 550 5 774 875 324 699 291 645 450 552 465 675 218 142 74 110 417 816 78 68 733 548 313 425 619 42 288 38 679 204 407 395 381 387 416 868 336 878 170 371 668 980 152 905 874 173 994 363 61 79 939 293 439 460 46 212 263 412 653 375 36 289 704 765 920 271 186 950 248 309 31 193 64 609 563 846 242 191 615 807 507 674 832 964 246 549 70 423 648 636 514 502 573 129 521 778 768 446 719 996 536 321 48 281 650 413 21 54 613 893 75 298 320 205 410 571 652 160 130 151 232 555 479 364 723 632 944 23 397 406 456 386 860 889 55 80 255 849 345 356 230 227 572 435 276 14 830 927 121 786 642 985 640 970 871 979 839 60 369 103 484 547 933 713 711 988 701 409 499 338 41 861 837 326 138 769 656 284 175 802 18 112 651 304 822 520 122 418 434 828 974 443 665 823 92 337 13 303 149 489 943 666 528 9 745 667 948 131 800 956 166 50 252 799 788 854 941 690 714 238 544 538 20 51 631 328 147 921 688 115 89 463 77 438 577 308 767 965 180 215 172 96 740 937 476 93 942 940 200 698 579 368 455 532 993 63 817 305 716 827 811 162 185 564 182 877 419 999 448 516 915 869 165 405 692 245 657 496 299 685 589 278 451 696 760 819 727 842 530 966 909 794 491 729 882 602 576 94 214 526 461 270 282 949 923 855 558 748 850 52 959 264 437 290 522 310 509 883 445 332 58 361 879 237 835 269 543 792 221 62 235 39 261 243 473 561 852 433 273 697 818 206 569 403 989 86 468 898 335 45 873 414 84 362 676 637 806 432 582 24 592 494 506 693 344 15 560 487 340 585 453 762 67 505 955 557 380 348 207 926 315 510 969 677 350 144 681 408 330 133 766 663 858 213 606 863 726 972 809 353 703 254 566 251 504 610 910 732 934 123 712 358 311 925 236 808 617 399 664 580 478 158 275 857 773 654 317 867 715 188 975 525 442 962 128 104 708 300 789 813 194 384 312 307 831 379 639 628 844 833 157 588 611 553 359 954 249 260 34 132 372 790 865 976 411 574 998 508 136 83 208 755 761 155 673 884 140 22 687 913 134 467 887 630 891 91 82 219 684 367 107 725 201 25 542 751 88 960 928 168 426 156 814 297 325 744 593 876 154 360 503 396 671 354 342 626 770 492 743 192 404 220 267 3 111 986 240 178 982 787 377 16 125 390 971 493 720 783 259 347 378 233 374 177 265 836 618 638 346 670 779 963 1000 771 226 862 908 139 471 620 428 398 431 735 420 691 66 135 223 287 95 660 365 490 612 895 176 306 793 464 757 457 678 810 935 85 987 856 174 458 105 488
# LIST_INTEGER = 4 10 7 6 9 1 5 2 3 8
# LIST_INTEGER = 9 7 6 2 4 3 8 1 10 5
# LIST_INTEGER = 9 10 5 1 2 7 3 8 6 4


# 100 erro
# ok LIST_INTEGER = 34 53 76 93 21 3 92 26 96 61 6 42 2 81 30 10 25 58 41 87 99 75 31 65 79 16 17 7 94 51 78 88 85 40 60 52 8 38 14 82 55 4 83 9 36 69 72 49 98 35 48 86 39 63 45 66 46 59 47 33 15 20 27 91 90 19 28 11 56 13 67 64 37 32 100 74 12 43 89 54 62 23 95 84 24 70 50 68 80 5 71 73 18 44 77 29 1 22 97 57
LIST_INTEGER = 100 87 74 92 62 52 49 38 51 83 50 43 4 56 54 33 97 24 59 3 91 55 15 65 86 63 64 73 25 47 16 28 93 21 60 26 36 78 82 37 2 11 66 17 46 94 72 77 96 88 14 19 34 48 98 22 99 85 95 12 58 71 39 6 81 9 40 27 90 29 67 79 89 75 70 84 68 76 32 20 7 35 30 23 53 42 1 8 13 10 61 57 44 41 80 69 18 45 5 31

# 500 erro
# ok LIST_INTEGER = 297 238 143 178 154 376 32 332 459 235 213 103 262 394 136 59 29 310 276 270 231 8 432 56 161 396 362 298 192 498 403 34 437 284 176 422 53 273 466 418 256 349 388 160 439 313 348 212 2 14 132 478 206 76 141 465 81 75 296 87 137 476 162 308 457 255 473 450 383 407 153 152 483 227 492 94 412 108 117 266 111 99 350 52 484 382 328 239 377 411 301 109 149 3 402 166 272 66 46 477 317 413 36 86 106 249 51 126 488 123 135 96 128 12 26 486 70 271 323 35 16 442 202 97 175 209 131 319 410 472 440 426 134 454 300 148 451 375 339 210 201 444 100 243 281 327 309 93 199 325 292 73 25 494 211 164 333 240 480 263 431 322 373 302 343 207 474 191 318 445 395 23 470 257 430 68 233 435 67 275 230 496 320 364 92 115 194 369 174 61 392 168 423 265 19 181 72 50 365 268 138 345 58 337 420 368 74 311 140 246 85 415 481 331 9 124 226 116 220 443 438 177 95 184 408 495 358 400 361 183 401 219 421 90 236 204 306 79 299 406 200 198 359 460 371 218 156 357 461 170 129 399 228 39 157 485 326 245 427 150 65 499 62 196 452 291 347 186 180 279 24 197 294 335 222 64 475 414 195 84 215 416 434 433 232 63 305 71 1 360 405 113 398 447 307 338 479 259 363 303 493 282 253 316 293 20 491 15 182 393 241 167 221 208 77 193 490 234 469 78 130 98 171 237 185 463 244 121 314 91 133 80 119 312 139 60 179 18 258 144 367 54 242 229 321 33 205 456 190 169 324 341 500 44 289 261 404 295 482 42 251 248 17 254 142 159 252 223 45 471 214 455 89 47 419 389 458 57 189 355 336 386 351 285 381 340 397 43 446 224 274 267 390 379 216 31 280 344 330 462 82 286 417 225 354 125 356 83 378 151 428 467 366 353 304 88 370 37 425 105 165 260 10 436 372 69 49 147 429 11 487 22 6 441 288 48 374 155 173 27 102 114 315 112 283 55 41 277 384 107 489 329 497 453 346 250 30 163 158 110 449 468 264 385 40 145 21 127 464 101 146 334 287 172 120 424 217 104 4 122 387 448 342 203 5 290 38 409 13 118 187 7 352 28 391 380 188 269 278 247
# ok LIST_INTEGER = 353 84 398 179 488 87 5 388 279 286 362 471 194 402 123 41 462 479 112 62 83 29 134 420 413 371 485 364 418 289 195 50 235 76 481 351 304 361 317 416 24 325 365 297 34 139 189 169 425 27 349 217 137 332 22 396 45 389 148 477 200 150 89 445 443 152 54 341 370 177 191 433 411 111 175 168 434 91 160 427 335 491 328 273 116 122 132 44 268 208 96 56 360 476 19 199 182 419 230 414 49 226 65 492 447 181 173 121 339 271 461 88 234 474 357 17 18 3 93 70 64 46 293 334 57 140 333 26 209 259 102 367 409 2 454 266 120 201 348 480 72 281 252 170 192 486 198 13 288 329 188 237 138 278 231 489 437 263 303 31 108 66 163 331 327 451 338 302 244 78 403 387 8 314 154 429 343 203 257 490 142 153 77 187 500 270 291 463 267 228 456 423 330 157 446 404 58 82 162 301 394 321 7 431 216 400 497 464 104 466 241 469 282 118 346 424 205 10 415 318 71 306 401 32 218 20 158 369 109 86 193 356 236 6 412 36 180 284 37 316 196 172 483 290 256 128 63 309 345 455 379 133 119 85 449 90 482 151 233 407 73 38 294 75 277 441 35 254 261 438 395 183 23 115 457 408 337 390 300 444 375 206 287 92 292 94 9 465 448 342 81 340 344 354 53 350 145 232 80 99 100 262 213 432 97 124 381 51 359 127 468 460 95 496 40 74 223 397 21 159 352 380 28 308 355 255 422 210 214 110 358 59 452 141 307 176 67 185 406 368 245 285 79 55 146 440 386 258 101 269 470 11 324 171 149 117 475 166 347 39 184 265 68 484 299 42 280 249 164 211 439 378 15 323 225 242 155 417 107 450 48 372 221 410 272 467 197 156 47 190 25 136 4 14 315 319 405 274 16 459 295 275 238 186 322 260 296 229 428 129 224 144 204 161 391 1 222 487 250 33 131 495 243 426 336 393 103 114 384 165 473 442 458 126 113 239 30 246 435 436 283 52 383 43 247 143 61 167 207 264 377 478 248 385 493 12 326 453 305 374 363 60 499 147 178 174 220 498 472 135 98 313 311 399 373 494 215 312 69 376 421 430 202 227 125 310 251 212 382 253 105 298 276 130 320 240 366 219 392 106
# 1000 erro
# ok LIST_INTEGER = 970 918 483 633 985 841 846 680 563 616 475 969 217 779 419 631 121 781 257 20 171 646 137 83 1 200 696 718 471 239 859 404 766 856 741 987 912 754 831 90 255 109 428 790 474 730 549 910 501 81 374 697 193 664 645 614 182 435 55 959 458 316 324 282 50 456 889 393 17 235 344 930 21 611 180 398 743 44 93 455 876 913 574 591 331 343 4 229 596 675 618 414 211 433 703 640 804 453 819 632 84 836 608 401 191 378 279 971 526 707 310 187 817 800 517 362 953 580 29 760 82 203 868 328 411 64 496 594 545 736 619 647 58 370 508 46 882 852 771 617 627 327 243 271 731 340 460 787 287 550 589 150 657 111 995 281 960 996 982 40 721 990 103 765 898 417 138 99 539 485 396 606 313 356 26 700 931 291 932 253 923 514 650 144 630 59 431 252 245 470 212 653 805 359 28 568 533 106 763 413 288 774 739 365 927 462 692 184 958 832 418 315 62 903 407 988 537 907 973 891 928 128 125 35 561 701 390 51 222 491 744 628 925 100 864 286 469 662 220 820 67 88 218 168 151 78 812 857 190 149 192 892 607 753 57 893 866 554 498 290 668 197 612 71 780 727 447 839 497 979 621 301 733 593 216 140 66 117 908 669 381 412 273 615 440 254 308 934 408 198 690 939 871 867 75 921 61 215 799 56 145 758 484 681 238 437 170 409 525 732 946 388 448 579 672 714 792 900 358 476 661 214 659 395 294 541 3 576 974 74 737 189 610 157 994 355 341 843 139 425 712 126 725 755 146 818 840 258 625 775 937 504 402 449 693 776 364 569 815 728 674 796 520 534 181 326 783 11 334 339 210 587 230 635 368 785 813 34 199 521 375 878 492 944 814 761 670 160 188 196 311 570 961 811 519 773 870 885 559 975 518 854 116 894 384 96 793 922 688 204 87 129 38 578 278 499 319 37 888 115 330 31 676 403 789 740 12 241 543 967 228 555 477 122 683 965 816 321 296 13 18 778 292 351 726 256 98 371 546 956 305 317 660 622 899 860 24 705 127 634 333 380 16 942 981 862 720 202 436 113 108 991 972 558 22 226 652 803 523 123 750 275 828 232 95 314 158 430 556 749 270 505 861 420 746 490 845 336 599 363 272 810 729 206 584 177 223 604 376 586 562 879 911 338 560 829 195 250 68 786 769 130 205 648 947 742 704 357 348 156 493 655 53 105 73 332 962 966 354 798 148 352 997 869 147 242 32 299 444 506 236 247 641 582 656 461 535 809 167 735 410 346 304 524 901 865 909 716 515 902 782 801 323 72 745 510 949 978 684 566 552 691 467 651 251 221 772 583 527 482 405 307 389 938 488 112 303 904 349 715 738 91 935 665 950 367 826 955 847 983 638 827 65 564 183 629 451 309 70 964 644 914 442 767 101 383 102 320 853 289 486 597 86 162 234 201 284 118 264 838 877 884 318 830 136 954 613 600 424 406 502 649 446 503 624 825 872 10 89 432 643 883 248 297 306 163 924 369 808 265 15 325 542 906 824 544 677 957 295 764 353 372 463 186 23 875 478 25 164 717 993 711 915 366 849 719 345 835 723 416 694 277 855 863 702 131 724 710 929 757 791 382 153 895 788 161 522 689 48 682 513 986 777 120 438 246 434 459 850 748 823 834 468 516 423 822 977 585 686 49 5 605 734 260 429 623 387 943 441 457 104 169 19 679 512 507 952 80 52 283 134 268 266 511 178 768 654 666 335 529 329 531 671 293 495 709 347 678 337 465 36 706 391 33 276 770 172 415 572 466 797 851 588 179 165 261 848 152 821 227 481 976 595 874 385 548 107 658 896 500 342 9 240 60 536 439 312 30 445 207 249 97 795 274 581 400 905 751 837 540 43 940 886 951 8 881 807 322 784 926 219 159 945 394 844 794 302 54 479 225 69 887 41 47 63 454 132 756 989 173 858 590 45 842 155 300 350 509 963 663 285 110 397 194 999 39 759 392 267 450 551 565 626 528 620 575 487 639 948 185 530 452 890 262 553 984 538 673 2 119 360 421 114 713 373 166 280 806 602 708 802 42 386 598 637 642 426 592 379 480 873 699 752 573 79 237 998 687 609 422 472 142 208 464 143 209 897 94 244 917 154 920 636 233 936 92 77 213 547 722 577 916 667 833 298 135 174 6 231 399 941 141 14 567 933 259 489 880 443 685 175 377 76 361 747 427 557 176 698 695 269 494 571 601 27 532 968 263 473 980 124 7 224 1000 762 919 85 133 603 992

LIST_INTEGER = 1 5 2 4 3
LIST_INTEGER = 5 4 2 1 3
LIST_INTEGER = 4 5 2 1 3
LIST_INTEGER = 5 2 4 1 3